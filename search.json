[
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "A normal post",
    "section": "",
    "text": "using UnicodePlots\nx1 = randn(1000)\nx2 = randn(1000)\nscatterplot(x1, x2, width = 20, height = 20)\n\n\n\n\n      ┌────────────────────┐ \n    4 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠁⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣇⠀⠀⠀⠀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠠⠀⠀⠀⡩⡀⡇⠀⠠⠀⠀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠁⠀⠰⡀⢌⣀⡷⢀⡂⣀⠀⠀⠀⠄⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠠⠩⠆⣦⡧⢀⡄⡄⠀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⡐⣸⣆⣶⣧⣧⢸⣑⡀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠈⡊⡭⣶⣿⡿⣿⣷⣅⠙⠈⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠐⠁⣨⣟⣿⣷⣿⣿⡽⢲⠪⠄⡄⠀⠀│ \n      │⠀⠀⠀⠀⠐⠄⢤⡇⣾⣟⣿⣿⣿⣿⠻⡫⡀⠀⠀⠀│ \n      │⠉⠉⠉⠉⠉⠉⠙⣽⣽⣿⣽⣿⣿⢿⡟⣋⠫⠉⠉⠉│ \n      │⠀⠀⠀⠀⠀⢈⡂⡘⣺⣿⣯⣿⣟⢿⣹⠐⡒⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠄⠀⠁⢼⣿⣾⣿⡹⠿⢙⠣⠂⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠸⡊⠬⣽⡿⡴⠺⠳⠀⠄⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠈⠀⢽⠱⠵⡗⠓⣧⠑⠀⠈⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠈⠘⠊⠠⠉⡗⠠⠀⠑⠂⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠀⠐⠀⠈⡇⠀⠀⠀⠀⠁⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠬⡇⠀⠄⠀⠀⠀⠀⠀⠀│ \n      │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀│ \n   -4 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀│ \n      └────────────────────┘ \n      ⠀-5⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀4⠀ \n\n\n\n\n\n\nhistogram(randn(100_000), nbins=40, height=6)\n\n\n                ┌                                        ┐ \n   [-4.5, -4.0) ┤▏ 2                                       \n   [-4.0, -3.5) ┤▏ 21                                      \n   [-3.5, -3.0) ┤▎ 121                                     \n   [-3.0, -2.5) ┤▊ 497                                     \n   [-2.5, -2.0) ┤██▊ 1 670                                 \n   [-2.0, -1.5) ┤███████▌ 4 449                            \n   [-1.5, -1.0) ┤███████████████▌ 9 238                    \n   [-1.0, -0.5) ┤█████████████████████████▎ 15 067         \n   [-0.5,  0.0) ┤███████████████████████████████▊ 19 055   \n   [ 0.0,  0.5) ┤████████████████████████████████  19 131  \n   [ 0.5,  1.0) ┤█████████████████████████▏ 14 957         \n   [ 1.0,  1.5) ┤███████████████▎ 9 111                    \n   [ 1.5,  2.0) ┤███████▌ 4 461                            \n   [ 2.0,  2.5) ┤██▋ 1 584                                 \n   [ 2.5,  3.0) ┤▊ 491                                     \n   [ 3.0,  3.5) ┤▎ 126                                     \n   [ 3.5,  4.0) ┤▏ 18                                      \n   [ 4.0,  4.5) ┤▏ 1                                       \n                └                                        ┘ \n                                 Frequency"
  },
  {
    "objectID": "posts/welcome/randomization1.html",
    "href": "posts/welcome/randomization1.html",
    "title": "Thesis distillation: part 1",
    "section": "",
    "text": "In my thesis I studied stratified randomization and it’s consequences for modelling. In this post I will try to distill my work. This first blog post describes stratified randomization and its conseqeunces for modelling."
  },
  {
    "objectID": "posts/welcome/randomization1.html#stratified-randomization",
    "href": "posts/welcome/randomization1.html#stratified-randomization",
    "title": "Thesis distillation: part 1",
    "section": "Stratified Randomization",
    "text": "Stratified Randomization\nStratified randomization solves the issue of covariate imbalance by stratifying the randomization onto levels of certain predictive baseline covariates. These levels are called strata. As an example, you might use blocked randomization within males and females separately to balance the distribution of sex across treatment, and typically, you only stratify on a few variables.\nTo observe the consequences of stratified randomization for modeling, we posit the following trial in which we expect sex to be predictive of the outcome and randomize patients within sex using blocked randomization. Let \\(Y\\) denote the continuous outcome, \\(X\\) denote sex, and \\(A\\) denote a binary treatment variable where we target a 1:1 allocation.\nInspired by (Kahan and Morris 2012) we posit the following DGP’s. For each \\(i = 1, \\dots, 50\\), let\n\\[\\begin{align*}\n&X_i \\sim \\text{Bernoulli}(1/2)\\\\\n&A_i \\sim \\text{Bernoulli}(1/2)\\\\\n&Y_i \\mid X_i, A_i \\sim \\alpha + \\beta_A A_i + \\beta_X X_i\n\\end{align*}\\]\nand\n\\[\\begin{align*}\n&X_i \\sim \\text{Bernoulli}(1/2)\\\\\n&A_i \\sim \\text{Stratified block randomization on } X \\text{ with a block size of 4} \\\\\n&Y_i \\mid X_i, A_i \\sim \\alpha + \\beta_A A_i + \\beta_X X_i\n\\end{align*}\\]\nIn the figure below, we simulate \\(N = 200\\) datasets, each of size \\(n = 50\\) with parameters \\((\\alpha = 0, \\beta_A = 0.2, \\beta_X = 0.5)\\), and plot the treatment specific means against each other.\n\n\n\nCode\n# Kahan, B. C., & Morris, T. P. (2011). Improper analysis of trials randomised\n# using stratified blocks or minimisation. Statistics in Medicine, 31(4),\n# 328–340. doi:10.1002/sim.4431 \nlibrary(tidyverse)\nlibrary(blockrand)\nlibrary(patchwork)\n\n# Number of datasets\nN = 200\n\n# Size of each dataset\nn_size = 50\n\nsim_data = function(n_size, rand_type = 0, pX = 0.5) {\n\n    # Simulate binary baseline covariate / the balancing variable\n    sex = rbinom(n_size, 1, pX)\n\n    # Simple randomization\n    A_simple = rbinom(n_size, 1, 0.5)\n\n    # Stratified Randomization\n    A_strat = rep(0,n_size)\n    n1 = sum(sex == 1)\n    n0 = sum(sex == 0)\n    A_strat[sex == 1] = as.numeric(blockrand(n=n1, num.levels=2)$treatment, block.sizes = 4)[1:n1]-1\n    A_strat[sex == 0] = as.numeric(blockrand(n=n0, num.levels=2)$treatment, block.sizes = 4)[1:n0]-1\n\n    # Simulate outcome outcome\n    Y_simple = 0.2 * A_simple + 5 * sex + rnorm(n_size, sd = 1)\n    Y_strat = 0.2 * A_strat + 5 * sex + rnorm(n_size, sd = 1)\n\n    if (rand_type == 0) {\n        c(mean(Y_simple[A_simple == 0]), c(mean(Y_simple[A_simple == 1])))\n    } else {\n        c(mean(Y_strat[A_strat == 0]), c(mean(Y_strat[A_strat == 1])))\n    }\n}\n\n# Create a function to calculate correlation and annotate the plot\nannotate_corr = function(cor_val, x, y) {\n  annotate(\"text\", x = x, y = y, label = sprintf(\"Correlation: %.2f\", cor_val), hjust = 0, vjust = 1, size = 4)\n}\n\n\n# Simulate 200 datasets of size 50\n#set.seed(123)\nvec_simple = replicate(N, sim_data(n_size))\nvec_strat = replicate(N, sim_data(n_size, rand_type = 1))\n\n# Collect data into tibbles\nsimple_df = tibble(Y0 = vec_simple[1, ], Y1 = vec_simple[2, ]) \nstrat_df = tibble(Y0 = vec_strat[1, ], Y1 = vec_strat[2, ]) \n\n# Estimate the correlation\ncor_simple = cor(simple_df$Y0, simple_df$Y1)\ncor_strat = cor(strat_df$Y0, strat_df$Y1)\n\np_simple = simple_df %>% \n    ggplot() + \n    geom_point(aes(x = Y0, y = Y1), alpha = 0.5) + \n    theme_bw() + \n    xlab(\"Mean in treatment group\") + \n    ylab(\"Mean in control group\") + \n    ggtitle(\"Simple randomization\") +\n    xlim(0, 5) + \n    ylim(0, 5) +\n    annotate_corr(cor_simple, 2.5, 4.8)  \n\np_strat = strat_df %>% \n    ggplot() + \n    geom_point(aes(x = Y0, y = Y1), alpha = 0.5) + \n    theme_bw() + \n    xlab(\"Mean in treatment group\") + \n    ylab(\"\") + \n    ggtitle(\"Stratified randomization\") + \n    xlim(0, 5) + \n    ylim(0, 5) + \n    annotate_corr(cor_strat, 2.5, 4.8)  \n\np_simple + p_strat\n\n\n\n\n\n\nNow we do the same, but change the distribution of the binary baseline covariate \\(X\\), i.e.,\n\\[\\begin{align*}\n&X \\sim \\text{Bernoulli}(0.9)\\\\\n\\end{align*}\\]\nThis yields\n\n\n\nCode\n#set.seed(123)\nvec_simple = replicate(N, sim_data(n_size, pX = 0.9))\nvec_strat = replicate(N, sim_data(n_size, rand_type = 1, pX = 0.9))\n\n# Collect data into tibbles\nsimple_df = tibble(Y0 = vec_simple[1, ], Y1 = vec_simple[2, ]) \nstrat_df = tibble(Y0 = vec_strat[1, ], Y1 = vec_strat[2, ]) \n\n# Estimate the correlation\ncor_simple = cor(simple_df$Y0, simple_df$Y1)\ncor_strat = cor(strat_df$Y0, strat_df$Y1)\n\np_simple = simple_df %>% \n    ggplot() + \n    geom_point(aes(x = Y0, y = Y1), alpha = 0.5) + \n    theme_bw() + \n    xlab(\"Mean in treatment group\") + \n    ylab(\"Mean in control group\") + \n    ggtitle(\"Simple randomization\") +\n    ylim(2.5, 6.5) + \n    xlim(2.5, 6.5) + \n    annotate_corr(cor_simple, 4.5, 5.8)  \n\np_strat = strat_df %>% \n    ggplot() + \n    geom_point(aes(x = Y0, y = Y1), alpha = 0.5) + \n    theme_bw() + \n    xlab(\"Mean in treatment group\") + \n    ylab(\"\") + \n    ggtitle(\"Stratified randomization\") +\n    ylim(2.5, 6.5) + \n    xlim(2.5, 6.5) + \n    annotate_corr(cor_strat, 4.5, 5.8) \n\np_simple + p_strat\n\n\n\n\n\n\nThe non-zero correlation between the treatment-specific means in the case of stratified randomization arises from the fact that we force an equal distribution of \\(X\\) within each treatment arm. If \\(X\\) denotes sex (0: man, 1: woman), and if, by chance, we observe more women than men, stratified block randomization ensures more women than men within each treatment group. Since being a woman has a strong positive effect on the outcome, both treatment means will be larger. This is not the case for simple randomization.\nIn the second plot, we simulate from the same DGP’s but change the variance of \\(X\\). Instead of \\(p_X = 0.9\\), we use \\(p_X = 0.5\\) as above. Note that the variance of \\(X\\) is, of course, \\(p_X(1 - p_X)\\) and is maximized when \\(p_X = 0.5\\). Now, we observe a lower correlation. This follows since the variance in the amount of women in each treatment group is overshadowed by the fixed individual variance."
  },
  {
    "objectID": "blogfront.html",
    "href": "blogfront.html",
    "title": "Posts",
    "section": "",
    "text": "Jan 7, 2024\n\n\nLaus Wullum\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nJul 30, 2022\n\n\nLaus Wullum\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Laus Wolsing Wullum",
    "section": "",
    "text": "Welcome to my site!\nNothing much to see yet."
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "Laus Wolsing Wullum",
    "section": "Education",
    "text": "Education\nMSc. Student in statistics at the University of Copenhagen (KU) (September 2021 - now)\nBSc. in Mathematics with electives in statistics and CS from KU. (2018 - 2021)"
  },
  {
    "objectID": "about.html#work",
    "href": "about.html#work",
    "title": "Laus Wolsing Wullum",
    "section": "Work",
    "text": "Work\nStatistician at Omicron Aps (June 2022 - now)"
  },
  {
    "objectID": "about.html#interests",
    "href": "about.html#interests",
    "title": "Laus Wolsing Wullum",
    "section": "Interests",
    "text": "Interests\nStatistical modelling, Bayesian statistics, Julia, R"
  },
  {
    "objectID": "about.html#mail",
    "href": "about.html#mail",
    "title": "Laus Wolsing Wullum",
    "section": "Mail",
    "text": "Mail\nlaus (dot) w @ hotmail (dot) com"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Laus Wullum",
    "section": "",
    "text": "Welcome to my site. You may find some of my writing on various topics by going to my blog."
  },
  {
    "objectID": "index.html#work",
    "href": "index.html#work",
    "title": "Laus Wullum",
    "section": "Work",
    "text": "Work\nBiostatistician at Omicron Aps\n(February 2024 - now)\nStudent biostatistician at Omicron Aps\n(June 2022 - February 2024)"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Laus Wullum",
    "section": "Education",
    "text": "Education\nMSc. in Statistics\nUniversity of Copenhagen (KU)\n(September 2021 - January 2024)\nBSc. in Mathematics with electives in Statistics and Computer Science\nUniversity of Copenhagen (KU)\n(September 2018 - June 2021)"
  },
  {
    "objectID": "index.html#interests",
    "href": "index.html#interests",
    "title": "Laus Wullum",
    "section": "Interests",
    "text": "Interests\nStatistical modelling, Bayesian statistics, Causal inference, Trial design, Julia, R"
  },
  {
    "objectID": "index.html#mail",
    "href": "index.html#mail",
    "title": "Laus Wullum",
    "section": "Mail",
    "text": "Mail\nlaus (dot) w @ hotmail (dot) com"
  }
]